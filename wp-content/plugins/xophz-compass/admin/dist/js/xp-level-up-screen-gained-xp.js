import{m as U,_ as B,r as u,e as _,o as g,a as e,w as t,b as o,t as p,f as m,c as N,k as C}from"./index.js";import{u as V}from"./index5.js";import{s as S}from"./sound-fx.js";const D={name:"xp-level-up-screen-gained-xp",data:M,props:{user:{default:0}},computed:$(),methods:z(),watch:E(),beforeCreate:F,created:T,beforeMount:X,mounted:j,beforeUpdate:A,updated:G,activated:O,deactivated:W,beforeDestroy:q,destroyed:H,components:{},mixins:[S],transitions:{},partials:{}};function M(){return{xp_level1:1440,nextLevel:0,currentLevel:0,userProgress:0,levels:[],levelUp:[],tempLevel:0}}function $(){return{...U(V),hasLeveled:{get(){return this.tempLevel!==this.user.level}},achievement:{get(){return this.xpStore.achievement}},currentUser:{get(){return this.$store.state.compass.currentUser}},player:{get(){return this.xpStore.user}},xpToNextLevel:{get(){return this.layLevels(),this.levels[this.nextLevel]-this.user.xp}}}}function z(){return{updateProgressBar(s){const l=this,c=l.levels[l.currentLevel],i=l.levels[l.nextLevel],n=i-c,x=i-s,f=n-x;l.userProgress=Math.floor(f/n*100)},updateNextLevelProgress(){},shellOutPoints(){const s=this,l=Number(s.user.xp)+Number(s.achievement.xp);s.xpStore.setUserPoints({...s.user,xp:l})},layLevels(){const s=this,{age:l}=s.player,c=l/10,i=s.xp_level1*c;let n;for(n=0;n<Math.floor(s.user.xp/i)+2;n+=1){const x=Math.ceil(i*n);s.levels[n]=x,s.user.xp>=s.levels[n]&&(s.currentLevel=n,s.nextLevel=n+1)}s.updateProgressBar(s.user.xp)}}}function E(){return{hasLeveled(s){s&&(this.tempLevel>this.user.level?this.playFx("levelDown"):this.playFx("levelUp"))},currentLevel(s){s&&s!==this.user.level&&this.xpStore.levelUp(s)}}}function F(){}function T(){this.tempLevel=this.user.level}function X(){}function j(){setTimeout(this.shellOutPoints,500)}function A(){}function G(){}function O(){}function W(){}function q(){}function H(){}const I={class:"xp-level-up-screen-gained-xp"},J={class:"text-2xl text-right p-3 pr-0"},K={key:0,class:"text-green-500 font-bold"},Q={key:1,class:"text-red-500 font-bold"},R={class:"text-2xl text-right p-3 pr-0"};function Y(s,l,c,i,n,x){const f=u("v-icon"),d=u("v-card-title"),r=u("v-col"),a=u("v-row"),v=u("v-card"),w=u("v-img"),h=u("v-spacer"),L=u("animated-number"),P=u("v-progress-linear"),y=u("v-btn"),k=u("v-container");return g(),_("div",I,[e(k,null,{default:t(()=>[e(a,{justify:"center"},{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[e(v,null,{default:t(()=>[e(a,{dense:""},{default:t(()=>[e(r,{class:"flex-grow-1"},{default:t(()=>[e(d,{class:"text-2xl"},{default:t(()=>[e(f,{start:"",size:"large"},{default:t(()=>[...l[2]||(l[2]=[o(" fal fa-hand-holding ",-1)])]),_:1}),l[3]||(l[3]=o(" Gained XP and AP! ",-1))]),_:1})]),_:1}),e(r,{cols:"1",class:"p-3"})]),_:1}),o(" "+p(s.levels),1)]),_:1})]),_:1}),e(r,{cols:"6",class:"p-5"},{default:t(()=>[e(v,{color:"blue"},{default:t(()=>[e(a,{dense:""},{default:t(()=>[e(r,{class:"flex-grow-1"},{default:t(()=>[e(d,{class:"text-2xl"},{default:t(()=>[e(f,{size:"large",start:""},{default:t(()=>[...l[4]||(l[4]=[o(" fal fa-hand-holding-magic ",-1)])]),_:1}),l[5]||(l[5]=o(" XP ",-1))]),_:1})]),_:1}),e(r,{class:"flex-grow-0 flex-shrink-0"},{default:t(()=>[e(d,{class:"text-2xl text-right"},{default:t(()=>[o(p(s.achievement.xp)+"p ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(r,{cols:"6",class:"p-5"},{default:t(()=>[e(v,{color:"red"},{default:t(()=>[e(a,{dense:""},{default:t(()=>[e(r,{class:"flex-grow-1"},{default:t(()=>[e(d,{class:"text-2xl"},{default:t(()=>[e(f,{size:"large",start:""},{default:t(()=>[...l[6]||(l[6]=[o(" fal fa-hand-holding-heart ",-1)])]),_:1}),l[7]||(l[7]=o(" AP ",-1))]),_:1})]),_:1}),e(r,{class:"flex-grow-0 flex-shrink-0"},{default:t(()=>[e(d,{class:"text-2xl text-right"},{default:t(()=>[o(p(s.achievement.ap)+"p ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(a,null,{default:t(()=>[e(r,{cols:"12",class:"mt-1"},{default:t(()=>[e(v,{elevation:s.hasLeveled?24:1},{default:t(()=>[e(a,{"no-gutters":""},{default:t(()=>[e(r,{class:"flex-grow-0 flex-shrink-0",cols:"2"},{default:t(()=>[e(a,{justify:"center",align:"center",class:"h-full"},{default:t(()=>[e(r,{class:"p-3"},{default:t(()=>[e(w,{src:s.currentUser.avatar},null,8,["src"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:t(()=>[e(a,{dense:""},{default:t(()=>[e(r,{class:"flex-grow-1"},{default:t(()=>[e(d,{class:"text-2xl text-right"},{default:t(()=>[o(p(s.currentUser.data.user_login)+" ",1),e(h)]),_:1})]),_:1}),e(r,{class:"text-right flex-grow-0 flex-shrink-0"},{default:t(()=>[e(d,{class:"text-2xl text-right"},{default:t(()=>[...l[8]||(l[8]=[o(" XP: ",-1)])]),_:1})]),_:1}),e(r,{cols:"3",class:"flex-grow-1 text-right"},{default:t(()=>[m("h1",J,[e(L,{start:s.user.xp,number:s.user.xp,sound:s.soundFx.points,onUpdateProgress:s.updateProgressBar},null,8,["start","number","sound","onUpdateProgress"])])]),_:1}),e(r,{class:"flex-grow-0 flex-shrink-0"},{default:t(()=>[...l[9]||(l[9]=[m("h1",{class:"text-2xl text-right pl-0 p-3"}," p ",-1)])]),_:1})]),_:1}),e(a,{dense:""},{default:t(()=>[e(r,{cols:"8",class:"pr-3"},{default:t(()=>[s.hasLeveled?(g(),N(d,{key:0,class:"text-2xl mb-0 pb-0 flex justify-end"},{default:t(()=>[s.tempLevel<s.user.level?(g(),_("span",K," LEVEL UP! ")):(g(),_("span",Q," LEVEL DOWN! "))]),_:1})):C("",!0),e(h)]),_:1}),e(r,{cols:"4",class:"pr-3 self-center"},{default:t(()=>[e(P,{color:"info",height:"10",modelValue:s.userProgress,"onUpdate:modelValue":l[0]||(l[0]=b=>s.userProgress=b)},null,8,["modelValue"])]),_:1})]),_:1}),e(a,{dense:""},{default:t(()=>[e(r,{class:"flex-grow-1"},{default:t(()=>[e(d,{class:"text-2xl text-right font-bold"},{default:t(()=>[o(" Level: "+p(s.currentLevel),1)]),_:1})]),_:1}),e(r,{class:"text-right flex-grow-0 flex-shrink-0"},{default:t(()=>[e(d,{class:"text-2xl text-right"},{default:t(()=>[...l[10]||(l[10]=[o(" next level: ",-1)])]),_:1})]),_:1}),e(r,{cols:"3",class:"flex-grow-1 text-right"},{default:t(()=>[m("h1",R,[e(L,{start:s.xpToNextLevel,number:s.xpToNextLevel},null,8,["start","number"])])]),_:1}),e(r,{class:"flex-grow-0 flex-shrink-0"},{default:t(()=>[...l[11]||(l[11]=[m("h1",{class:"text-2xl text-right pl-0 p-3"}," p ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["elevation"])]),_:1})]),_:1}),e(a,{justify:"center",align:"center"},{default:t(()=>[e(r,{cols:"12",class:"mt-4 text-center"},{default:t(()=>[e(y,{color:"orange",size:"large",rounded:"pill",class:"px-8 shadow-lg",onClick:l[1]||(l[1]=b=>{s.playFx("click"),s.$router.push({path:"/xp/achievement/complete/gp"})})},{default:t(()=>[l[13]||(l[13]=o(" Collect GP ",-1)),e(f,{size:"large",end:""},{default:t(()=>[...l[12]||(l[12]=[o(" fa fa-hand-holding-usd ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const se=B(D,[["render",Y]]);export{se as default};
